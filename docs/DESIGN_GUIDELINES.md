# Global Design Guidelines

プロダクト全体のUI/UXを一貫させるためのグローバル基準。個別画面で迷ったらまずここに沿って判断し、例外は理由を明示して記録する。

## 基本原則
- 明確さ: 重要な情報を最短距離で伝える。不要な装飾より、階層とコントラストで意味を示す。
- 一貫性: コンポーネント、余白、トーンを揃え、例外はドメイン上の理由を持つ。
- アクセシビリティ: 主要アクションとテキストは WCAG AA 以上のコントラストを維持。キーボード操作を阻害しない。
- 意図的な動き: モーションは文脈を補足するために使い、派手さで目を奪わない。

## レイアウトと余白
- グリッド: ベース8px系のスケールで間隔を揃える（例: 8/12/16/24/32）。左右余白はモバイル16px、デスクトップ24px以上を目安。
- ブレークポイント: モバイル <640px / タブレット 640–1024px / デスクトップ >1024px を基準に折り返しとサイズ調整を行う。
- セクション構造: 見出し→本文→操作の順に配置し、関連要素をカードや背景レイヤでまとめて視線誘導する。
- スクロール: ヒーローや上部に不要な大面積余白を置かず、主要情報が1スクロール以内に見えるようにする。

## タイポグラフィ
- フォント: プロジェクトで定義されたグローバルフォント変数（例: `--font-sans`）を利用し、ヘッディングは太め（600–700）、本文は400–500。
- 階層: H1/H2/H3は明確に段差を付け、本文14–16px、キャプション12–13pxを目安にする。
- 行間: 本文は1.5前後、見出しはややタイト（1.2–1.35）。長文は60–75文字/行を目安に折り返す。
- 強調: 太字か色差分で1つの手段に絞り、過度な下線や大文字化は避ける。

## カラーとコントラスト
- 役割別パレット: `primary`（主要操作）、`neutral`（背景・ボーダー）、`feedback`（success/warn/danger/info）を明確に分離する。
- 背景レイヤ: 背景 > カード > コントロール > アクションのレイヤで彩度と明度を上げ、立体感を作る。
- コントラスト: テキストと背景は最低 4.5:1、ボタン背景とテキストは 3:1 を下回らない。
- アクセント乱用防止: アクション色は画面に2–3点までに絞り、情報量の多い画面ではニュートラル基調に寄せる。
- トークン運用: `app/globals.css` の CSS カスタムプロパティと `src/shared/ui/designTokens.ts` を経由して色を参照する。コンポーネント内で `text-*` や生のカラーコードを直書きしない。
- テーマ切替: テキスト色は `.text-strong` / `.text-muted` などのトークン化したユーティリティを使い、ライト/ダーク双方で背景と溶けないようにする。
- トーン追加: 新しい役割色を作る場合は `designTokens` の `gradient/text/shadow` にトーンを足し、`docs` に使用目的と範囲を追記する。

## コンポーネント共通
- ボタン: プライマリは実行の唯一選択肢に限定。セカンダリ・テキストボタンで階層を作り、危険操作は `danger` で分離。
- フィールド: ラベルは常時表示。入力枠と背景のコントラストを確保し、必須/エラー/成功の状態を色とテキストで二重に示す。
- フィードバック: エラーは具体的な修正方法を1行で提示。成功は軽量なトースト、重大な警告はダイアログでブロック。
- アイコン: 装飾目的でなく意味伝達に使用。アイコンだけのボタンにはツールチップか `aria-label` を必ず付ける。

## モーションとインタラクション
- 用途を限定: 状態変化の説明（ロード→完了）、階層遷移（モーダル・ドロワー）、フォーカス誘導にのみ使う。
- 時間とカーブ: 120–240msを基準に、主要遷移は ease-in-out、入力フィードバックは ease-out を用いる。
- 過剰防止: 同一画面で異なるモーションスタイルを多用しない。フェード/スライド/スケールのいずれかに統一する。

## アクセシビリティと国際化
- フォーカス: すべてのインタラクティブ要素に可視フォーカスリングを保持し、カスタムフォーカス時もコントラストを確保。
- キーボード: Tab順は視覚順に合わせる。Enter/Spaceでボタン操作、Escでモーダルを閉じる。
- 文言: ショートコピーは動詞から始め簡潔に。エラーメッセージは「原因 + 行動」をセットで記述。
- 多言語: ハードコードを避け、長文でも折り返しが崩れない幅と余白を確保する。

## アンチパターン（避けること）
- 意味のない装飾アイコン、無目的なグラデーションやシャドウ。
- デフォルト状態で境界が曖昧な入力欄（背景と同化する薄いボーダー）。
- アクセント色の多用、目的が不明瞭なアニメーション、文脈のないカラーフラッシュ。
- コンテンツ密度が高い画面での過度な余白、逆にリストやフォームでの極端な詰め込み。

## 運用ルール
- 新規UIはコンポーネント単位で再利用可否を検討し、propsと状態を最小限に保つ。
- 例外デザインを追加する際は理由・範囲・期限をチケットに記録し、定期的に整理する。
- デザインの議論はスクリーンショットと意図（目的/対象ユーザー/成功指標）をセットで残す。
